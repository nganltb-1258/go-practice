{{ define "index" }}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Employees</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <h2>List Employees</h2>

        <div class="toolbar">
            <a href="/employees/new" class="btn btn-primary">+ Add Employee</a>

            <form method="GET" class="search-box">
                <input type="text" name="keyword" class="search-input" id="searchInput" placeholder="Search employee name..." value="{{.Keyword}}">
                <button type="submit" class="btn btn-search">Search</button>
            </form>
        </div>

        <div class="table-wrapper">
            <div class="info-bar">
                <span>Total Records: {{.Total}}.</span>
                <span>This is page {{.Page}} in total {{.TotalPages}} page(s)</span>

                <a href="/employees/export" style="float: right;">Export CSV</a>
            </div>
            {{if gt .TotalPages 1}}
            <div class="pagination">
                {{if gt .Page 1}}
                <a href="?page={{sub .Page 1}}&keyword={{.Keyword}}" class="page-link">« Previous</a>
                {{end}}

                {{range .Pages}}
                    {{if eq . $.Page}}
                    <span class="page-link active">{{.}}</span>
                    {{else}}
                    <a href="?page={{.}}&keyword={{$.Keyword}}" class="page-link">{{.}}</a>
                    {{end}}
                {{end}}

                {{if lt .Page .TotalPages}}
                <a href="?page={{add .Page 1}}&keyword={{.Keyword}}" class="page-link">Next »</a>
                {{end}}
            </div>
            {{end}}
            <table class="styled-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Employee</th>
                        <th>Position</th>
                        <th>Salary</th>
                        <th>Department</th>
                        <th style="text-align: center;">Actions</th> </tr>
                </thead>
                <tbody>
                    {{range .Employees}}
                    <tr>
                        <td>#{{.Id}}</td>
                        <td>
                            <div class="user-info">
                                <div class="avatar-placeholder">{{slice .Name 0 1}}</div>
                                <span>{{.Name}}</span>
                            </div>
                        </td>
                        <td>{{.Position}}</td>
                        <td>{{.Salary}} $</td>
                        <td>{{.DepartmentName}}</td>
                        <td style="text-align: center;">
                            <a href="/employees/edit?id={{.Id}}" class="btn btn-edit">Edit</a>
                            <form action="/employees/delete" method="POST" style="display:inline;">
                                <input type="hidden" name="id" value="{{.Id}}">
                                <button type="submit" class="btn btn-delete" onclick="return confirm('Are you sure you want to delete this employee?');">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {{else}}
                    <tr>
                        <td colspan="7" style="text-align:center; padding: 20px; color: #777;">
                            No employees found.
                        </td>
                    </tr>
                    {{end}}
                </tbody>

            </table>
        </div>
    </div>
</body>
</html>
{{ end }}
